# 			图书管理商城



## 一、商城暂定数据表





### 1.1、用户表

| 字段     | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| 用户编号 | 主键                                                         |
| 用户名称 | 用户名                                                       |
| 密码     | 登录密码                                                     |
| 金额     | 用户余额                                                     |
| 权限号   | 每个用户登录成功后，根据权限号不同进入不同的界面(逻辑关联权限表) |



### 1.2、书籍表

| 字段   | 描述        |
| ---- | --------- |
| 书籍编号 | 数据编号  主键  |
| 书籍名称 | 书籍名称      |
| 单价   | 书籍销售单价    |
| 库存量  | 书籍在库存中的总量 |

书籍编号(数据编号 主键) ,书籍名称,单价,库存量

### 1.3、订单表

| 字段   | 描述                                |
| ---- | --------------------------------- |
| 订单号  | 主键                                |
| 订单总价 | 该订单应付实际金额                         |
| 订单日期 | 订单实际付款日期。（该字段可以省略，但是在打印订单时显示实际日期） |
| 备注   | 略                                 |
| 用户id | 逻辑关联用户表主键                         |
订单号(主键),订单总价,订单日期(订单实际付款日期。（该字段可以省略，但是在打印订单时显示实际日期）),备注,用户id(逻辑关联用户表主键)


### 1.4、商品表(订单单项表)

| 字段   | 描述                             |
| ---- | ------------------------------ |
| 商品编号 | 主键（实际就是购买书籍编号）                 |
| 商品名称 | 购买商品的实际名称                      |
| 购买数量 | 购买商品的数量                        |
| 商品单价 | 购买商品的单个销售价格                    |
| 总价   | 单项商品的总价(数量 * 单价)，该字段根据自身需求是否添加 |
商品编号(主键（实际就是购买书籍编号）),商品名称,购买数量,商品单价,总价(单项商品的总价(数量 * 单价)，该字段根据自身需求是否添加)
### 1.5、权限表

| 字段   | 描述                         |
| ---- | -------------------------- |
| 权限号  | 主键 (1:表示买家，2：表示卖家，3：表示管理员) |
| 权限名称 | 权限号对应的名称 。 比如:  3:表示"管理员"  |
|      |                            |
权限号(主键 (1:表示买家，2：表示卖家，3：表示管理员)),权限名称(权限号对应的名称 。 比如: 3:表示"管理员")


### 1.6、订单和订单单项关系表

| 字段    | 描述       |
| ----- | -------- |
| 序号    | 主键       |
| 订单号   | 关联订单主键   |
| 订单单项号 | 关联订单单项主键 |
订单和订单单项关系表的字段为:序号(主键),订单号(关联订单主键),订单单项号(关联订单单项主键)






## 二、View层





### 2.1、首页展示

![](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yangkaijun/20240508092240.png)



当运行程序后，显示程序首页功能，如上图:

**完成功能:**

1、功能1 用户登录功能

2、新用户注册功能

3、用户充值功能

4、退出系统功能

**注:系统启动后只有当用户选择退出，才能结束程序。**



### 2.2、注册功能

![](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yangkaijun/20240508092244.png)



**注意: 注册新用户，用户名不能重名，重名显示该用户已存在。新用户默认金额为0.0元**

​	**新用户注册，默认为买家，修改权限需要通过管理员方可修改**

​	**新用户注册成功后即可登录**	





### 2.3、充值功能

![](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yangkaijun/20240508092248.png)



**注意: 充值金额 自行限定**





### 2.4、登陆功能

![](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yangkaijun/20240508092253.png)





**注意:**

​	**1、用户登录有三次机会，如果三次登录失败，自动退出到系统首页**

​	**2、用户登录成功后，是根据用户权限号确定需要跳转的页面**







## 三、买家页面操作



### 3.1、实现功能如下:



1、用户进入买家页面展示所有书籍信息

2、用户根据书籍编号购买书籍(或者根据书籍名称购买书籍)

3、判断用户输入的书籍编号是否存在，如果不存在则进行重新购买

4、如果书籍编号存在，提示用户输入购买数量。购买数量不能超过库存量，否则显示库存不足!重新进入购买

5、如果书籍编号和数量正确则把该条商品信息保存下来

6、实现多次选购商品(如果用户已经添加选择一本书籍后，还可以购买第二本，第三本等等....)

7、选择商品结束后提示用户是否进行结算，结算时首先判断用户余额是否充足！如果不够则当次购买失败！需要进行重新购买

​	结算之前，需要计算购物车中的商品总价，方可进行判断

8、如果用户余额充足！打印订单信息。

**9、显示订单信息之前需要修改商品库存，修改用户余额，查询订单表、订单单项表以及中间表插入数据**

**打印订单案例,如下图:**

=============打印订单信息==================

订单号:xxxxxxxxxxxxxxxx

-- -- -- -- --  -- -- --购买商品详情如下 -- -- --  -- -- -- -- -- --

商品编号		商品名称					购买数量		单价		商品总价

1001			  一只特立独行的猪		10					5			50

1002			 蛤蟆先生去看心理医生  10					10		100

1003			世界尽头与冷酷仙境	   10					3			30

-- -- -- -- --  -- -- -- ..-- -- --  -- -- -- -- -- --  -- -- -- -- -- --  --

​												订单总价:  180元

​												日期: 2023-5-23 14:50:00



10、当用户购买完成后自动返回到主页面 （或者是买家页面也可）





## 四、卖家页面操作

![](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yangkaijun/20240508092259.png)



### 4.1、实现功能如上图:



1、添加书籍

​	注意：保证书籍编号和名称不能重复

2、删除书籍：

​	可以根据书籍编号完成删除，亦可以根据书籍名称完成删除

3、修改书籍

![](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yangkaijun/20240508092303.png)



4、查看所有书籍信息



5、返回首页



## 五、管理员页面操作

![](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yangkaijun/20240508092306.png)



### 5.1、实现功能如上图：



1、新增用户

​	需要保证用户名称不重复，如果重复提示重新输入用户名

2、删除功能

​	根据用户编号实现删除用户，输入的编号必须存在，否则不能删除

3、修改功能

​	先查看所有用户，选择一条需要修改的用户，进行修改

​	处理编号，其余字段都可修改

4、查询功能

​	查看所有用户信息

5、返回首页

​	























